ros2 pkg create --build-type ament_cmake mw_ahrsv1_ros2 --dependencies rclcpp std_msgs sensor_msgs tf geometry_msgs tf2 tf2_ros tf2_msgs


```
docker run -it --rm --name micro-ros-foxy --net=host -v /dev:/dev --privileged tge1375/sw-micro-ros:0.0.4
ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/teensy4.0

ros2 launch src_demo joystick_control_foxy.launch.py
ros2 launch src_odometry src_bringup.launch.py
ros2 launch src_odometry src_bringup_new.launch.py
```

```
ros2 run joy_to_cmd joy_to_cmd_vel
ros2 run cmd_to_src cmd_to_src

ros2 launch src_odometry src_bringup.launch.py
ros2 run joy joy_node
```

Real src

```
docker run -it --rm --name micro-ros-foxy --net=host -v /dev:/dev --privileged tge1375/sw-micro-ros:0.0.4
ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/teensy4.0

ros2 launch src_demo joystick_control_foxy.launch.py
ros2 launch src_odometry src_bringup_new.launch.py 
```

2022 05 04 log

```
ros2 launch src_odometry src_bringup.launch.py
```

# TODO
-0.05 +0.05 오가면 변경 시마다 빠르게 전환되었다가 점차 느려지는 현상 발생
=> 속도 변환 시 pwm을 나누기 2가 아니라 현재 속도에 비례하여 일정 수 만큼 작아지도록 고침

ros2 run rqt_robot_steering rqt_robot_steering --force-discover

0.1 정도 속도에서는 가다말다 한다.
=> 실제 pwm도 오락가락 했음

2022 05 05 log

micro-ros단의 주기를 더 느리게 해보자. 40ms => 80ms

무언가에 걸려서 못넘어가는 경우, 이를 보상하기 위해 갑자기 빨라져버리는 현상이 발생하며, 
이는 특히 회전이 걸려있을 시 위험하다.

navigation이 되기는 한다.
대신 이러한 점들이 고쳐져야 함
- 가속 문제 (가속이 너무 천천히 된다.)
- 각속도 제어 문제 (현재는 각속도가 이리저리 oscillation이 생기고 있다.)
- 최대 속도 제한 주기 (현재 너무 빠르게 움직인다.